!function(a){a.fn.tSelect=function(b){a("html").addClass("has-ts-select");var c={placeholder:"Select",filter:!1,filterPlaceholder:"Filter\u2026",filterNoMatches:"No matches\u2026",dom:{wrapperClass:"ts-wrap",triggerClass:"ts-trigger",optionsWrapClass:"ts-options-wrap",optionClass:"ts-option",activeOptionClass:"ts-active"},onOptionSelect:function(){},onActive:function(){}};return this.each(function(){var d=a.extend(c,b),e=a(this),f=e.find("option"),h=(e.attr("data-placeholder")?e.attr("data-placeholder"):d.placeholder,a('<div class="'+d.dom.wrapperClass+(e.is(":disabled")?" ts-disabled":"")+'"></div>')),i=a('<a href="#" class="'+d.dom.triggerClass+'">'+d.placeholder+"</a>"),j=a('<span class="ts-filter"><input type="text" placeholder="'+d.filterPlaceholder+'" /></span>'),k=a('<div class="'+d.dom.optionsWrapClass+'"></div>');if(!a(this).parents("."+d.dom.wrapperClass).length){var l=function(){e.hide(),h.insertAfter(e),i.appendTo(h),k.appendTo(h),f.each(function(){val=a(this).val(),optGroup=a(this).parents("optgroup"),html=a(this).html(),opt=a("<a />",{"class":d.dom.activeOption,href:"#","data-val":val,html:html}),""!=val&&(optGroup.length>0?(currGroup=a(".ts-group-"+optGroup.index()),currGroup.length<1&&a('<span class="ts-optgroup ts-group-'+optGroup.index()+'"><span class="ts-group-title">'+optGroup.attr("label")+"</span></span>").appendTo(k),opt.appendTo(currGroup)):opt.appendTo(k))}),1==d.filter&&(j.prependTo(k),a('<span class="ts-error">'+d.filterNoMatches+"</span>").insertAfter(j))},m=function(){i.on("click",function(b){_self=a(this),_elWrap=_self.parents(".ts-wrap"),_optionsWrap=_self.siblings("."+d.dom.optionsWrapClass),b.preventDefault(),a(".ts-options-wrap").hide(),a(".ts-wrap").removeClass("ts-active"),_optionsWrap.is(":visible")?(_optionsWrap.hide(),_elWrap.removeClass("ts-active")):(_optionsWrap.show(),_elWrap.addClass("ts-active")),1==d.filter&&j.find("input").trigger("focus"),d.onActive()}),k.find("a").on("click",function(b){_self=a(this),_elWrap=_self.parents(".ts-wrap"),_val=_self.attr("data-val"),b.preventDefault(),k.find("a.active").removeClass("active"),_self.addClass("active"),e.val(_val).trigger("change"),_elWrap.removeClass("ts-active"),i.text(_self.html()),k.hide(),d.onOptionSelect()}),a("html, body").on("click",function(b){target=a(b.target),target.parents(".ts-wrap").length<1&&a(".ts-wrap.ts-active").length>0&&(a(".ts-options-wrap").hide(),a(".ts-wrap").removeClass("ts-active"))}),1==d.filter&&j.find("input").on("keyup",function(b){var c=a(this).val(),d=a(this).parents(".ts-filter");c=c.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()}),matches=d.siblings("a:contains("+c+")"),nonmatches=d.siblings("a:not(:contains("+c+"))"),""==c?d.siblings("a.ts-unmatched").removeClass("ts-unmatched"):(nonmatches.addClass("ts-unmatched"),matches.length<1?k.addClass("ts-no-matches"):(k.removeClass("ts-no-matches"),matches.removeClass("ts-unmatched")))})};l(),m()}})}}(jQuery);